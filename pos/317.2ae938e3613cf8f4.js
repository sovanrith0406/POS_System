"use strict";(self.webpackChunkpos=self.webpackChunkpos||[]).push([[317],{8317:(R,c,i)=>{i.r(c),i.d(c,{MyProfileModule:()=>$});var d=i(9132),P=i(4466),Z=i(9170),e=i(4650),f=i(3848),a=i(4006),F=i(364),p=i(2340),g=i(529);let h=(()=>{class t{constructor(o){this.http=o,this.url=p.N.apiUrl,this.httpOptions={headers:(new g.WM).set("Content-Type","application/json")}}getProfile(){return this.http.get(this.url+"/my-profiles",this.httpOptions)}updateProfile(o){return this.http.post(this.url+"/my-profiles",o,this.httpOptions)}updatePassword(o){return this.http.post(this.url+"/my-profiles/change-password",o,this.httpOptions)}}return t.\u0275fac=function(o){return new(o||t)(e.LFG(g.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var v=i(1059),C=i(6895),_=i(4859),l=i(9549),w=i(4144),y=i(1572),I=i(2614);const x=["myProfileNgForm"];function B(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Full name is required "),e.qZA())}function b(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Phone address is required "),e.qZA())}function T(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Please enter a valid phone address "),e.qZA())}function J(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Email address is required "),e.qZA())}function N(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Please enter a valid email address "),e.qZA())}function M(t,r){1&t&&(e.TgZ(0,"span",16),e._uU(1," \u1780\u17c2\u1794\u17d2\u179a\u17c2 "),e.qZA())}function A(t,r){1&t&&e._UZ(0,"mat-progress-spinner",17),2&t&&e.Q6J("diameter",24)("mode","indeterminate")}let O=(()=>{class t{constructor(o,n,s,u){this._serviceMyProfile=o,this._formBuilder=n,this._snackBar=s,this._router=u,this.url=p.N.apiUrl,this.file=p.N.fileUrl,this.contact=[],this.saving=!1,this.src="assets/images/avatars/profile.jpg",this.user={id:null,name:null,email:null,avatar:null,phone:null}}ngOnInit(){this.data=localStorage.getItem("user"),this.data&&(this.data=JSON.parse(this.data),this.data||(localStorage.clear(),this._router.navigateByUrl("/auth/login"))),this.data&&(this.src=this.data.avatar),this._buildForm()}submit(){this.form.invalid||(this.form.disable(),this.saving=!0,this._serviceMyProfile.updateProfile(this.form.value).subscribe(o=>{this.saving=!1,console.log(o.data),this.form.enable(),o.data&&(console.log(o.data),this.user.id=o.data.id,this.user.email=o.data.email,this.user.name=o.data.name,this.user.avatar=o.data.avatar,this.user.avatar=""==o.user.avatar?"assets/images/avatars/default.jpg":this.file+o.data.avatar,this.user.phone=o.data.phone,localStorage.setItem("user",JSON.stringify(this.user))),this._snackBar.openSnackBar(o.message,"")},()=>{this.form.enable(),this.myProfileNgForm.resetForm(),this.saving=!1}))}srcChange(o){this.form.get("avatar").setValue(o)}_buildForm(){this.form=this._formBuilder.group({name:[this.data.name,[a.kI.required]],phone:[this.data.phone,[a.kI.required,a.kI.pattern("(^[0][0-9].{7}$)|(^[0][0-9].{8}$)|(^[855][0-9].{9}$)|(^[855][0-9].{10}$)|(.+@.+..+)")]],email:[this.data.email,[a.kI.required,a.kI.email,a.kI.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],avatar:[""]})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(h),e.Y36(a.QS),e.Y36(v.o),e.Y36(d.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-overview"]],viewQuery:function(o,n){if(1&o&&e.Gf(x,5),2&o){let s;e.iGM(s=e.CRH())&&(n.myProfileNgForm=s.first)}},decls:28,vars:15,consts:[[1,"main-content-overview","p-3"],[1,"overview-image"],[3,"mode","title","index","src","srcChange"],[1,"w-full","p-6"],[1,"w-full"],[1,"custom-form",3,"formGroup"],["myProfileNgForm","ngForm"],["appearance","outline",1,"w-full","mb-5"],["id","name","matInput","",3,"formControlName"],[4,"ngIf"],["id","phone","matInput","",1,"siereap",3,"formControlName"],["id","email","matInput","",1,"siereap",3,"formControlName"],[1,"flex","justify-end"],["mat-flat-button","",1,"w-full","py-6","sm:min-w-20","sm:max-w-20","min-h-11","max-h-11","rounded-md","custom-button",3,"disabled","click"],["class","text-lg",4,"ngIf"],[3,"diameter","mode",4,"ngIf"],[1,"text-lg"],[3,"diameter","mode"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"app-portrait",2),e.NdJ("srcChange",function(u){return n.srcChange(u)}),e.qZA()(),e.TgZ(3,"div",3)(4,"div",4)(5,"form",5,6)(7,"mat-form-field",7)(8,"mat-label"),e._uU(9,"\u1788\u17d2\u1798\u17c4\u17c7"),e.qZA(),e._UZ(10,"input",8),e.YNc(11,B,2,0,"mat-error",9),e.qZA(),e.TgZ(12,"mat-form-field",7)(13,"mat-label"),e._uU(14,"\u179b\u17c1\u1781\u1791\u17bc\u179a\u179f\u17d0\u1796\u17d2\u1791"),e.qZA(),e._UZ(15,"input",10),e.YNc(16,b,2,0,"mat-error",9),e.YNc(17,T,2,0,"mat-error",9),e.qZA(),e.TgZ(18,"mat-form-field",7)(19,"mat-label"),e._uU(20,"\u17a2\u17bb\u17b8\u1798\u17c9\u17c2\u179b"),e.qZA(),e._UZ(21,"input",11),e.YNc(22,J,2,0,"mat-error",9),e.YNc(23,N,2,0,"mat-error",9),e.qZA(),e.TgZ(24,"div",12)(25,"button",13),e.NdJ("click",function(){return n.submit()}),e.YNc(26,M,2,0,"span",14),e.YNc(27,A,1,2,"mat-progress-spinner",15),e.qZA()()()()()()),2&o&&(e.xp6(2),e.Q6J("mode",n.mode)("index",1)("src",n.src),e.xp6(3),e.Q6J("formGroup",n.form),e.xp6(5),e.Q6J("formControlName","name"),e.xp6(1),e.Q6J("ngIf",n.form.get("name").hasError("required")),e.xp6(4),e.Q6J("formControlName","phone"),e.xp6(1),e.Q6J("ngIf",n.form.get("phone").hasError("required")),e.xp6(1),e.Q6J("ngIf",n.form.get("phone").hasError("phone")),e.xp6(4),e.Q6J("formControlName","email"),e.xp6(1),e.Q6J("ngIf",n.form.get("email").hasError("required")),e.xp6(1),e.Q6J("ngIf",n.form.get("email").hasError("email")),e.xp6(2),e.Q6J("disabled",n.form.invalid||n.saving),e.xp6(1),e.Q6J("ngIf",!n.form.disabled),e.xp6(1),e.Q6J("ngIf",n.form.disabled))},dependencies:[C.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,_.lW,l.TO,l.KE,l.hX,w.Nt,y.Ou,I.w],styles:[".main-content-overview[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:300px calc(100% - 315px);gap:15px}.overview-image[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}@media (max-width: 960px){.main-content-overview[_ngcontent-%COMP%]{grid-template-columns:1fr}.overview-image[_ngcontent-%COMP%]   .picture[_ngcontent-%COMP%]{margin:2em auto 0;width:60%}}"],data:{animation:F.F}}),t})();var Q=i(3056),U=i(7392);const Y=["changePasswordNgForm"];function q(t,r){1&t&&e._UZ(0,"mat-icon",18),2&t&&e.Q6J("svgIcon","heroicons_solid:eye-off")}function k(t,r){1&t&&e._UZ(0,"mat-icon",18),2&t&&e.Q6J("svgIcon","heroicons_solid:eye")}function D(t,r){1&t&&e._UZ(0,"mat-icon",18),2&t&&e.Q6J("svgIcon","heroicons_solid:eye-off")}function S(t,r){1&t&&e._UZ(0,"mat-icon",18),2&t&&e.Q6J("svgIcon","heroicons_solid:eye")}function G(t,r){1&t&&e._UZ(0,"mat-icon",18),2&t&&e.Q6J("svgIcon","heroicons_solid:eye-off")}function E(t,r){1&t&&e._UZ(0,"mat-icon",18),2&t&&e.Q6J("svgIcon","heroicons_solid:eye")}function j(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Password confirmation is required "),e.qZA())}function L(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Passwords must match "),e.qZA())}function z(t,r){1&t&&(e.TgZ(0,"span",19),e._uU(1," \u1794\u17d2\u178f\u17bc\u179a\u1796\u17b6\u1780\u17d2\u1799\u179f\u1798\u17d2\u1784\u17b6\u178f\u17cb "),e.qZA())}function H(t,r){1&t&&e._UZ(0,"mat-progress-spinner",20),2&t&&e.Q6J("diameter",24)("mode","indeterminate")}let X=(()=>{class t{constructor(o,n,s,u,m){this._serviceMyProfile=o,this._formBuilder=n,this._snackBar=s,this.loadingService=u,this._router=m,this.saving=!1}ngOnInit(){this.changePasswordForm=this._formBuilder.group({old_password:["",[a.kI.required,a.kI.minLength(6),a.kI.maxLength(20)]],password:["",[a.kI.required,a.kI.minLength(6),a.kI.maxLength(20)]],confirm_password:["",[a.kI.required,a.kI.minLength(6),a.kI.maxLength(20)]]})}changePassword(){this.changePasswordForm.invalid||(this.changePasswordForm.disable(),this.loadingService.show(),this.saving=!0,this._serviceMyProfile.updatePassword(this.changePasswordForm.value).subscribe(o=>{this.loadingService.hide(),this.saving=!1,this.changePasswordForm.enable(),this._snackBar.openSnackBar(o.message,""),this.changePasswordNgForm.resetForm()},o=>{this.loadingService.hide(),this.saving=!1,this.changePasswordForm.enable(),this._snackBar.openSnackBar(o.error.message,"error")}))}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(h),e.Y36(a.QS),e.Y36(v.o),e.Y36(Q.b),e.Y36(d.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-change-password"]],viewQuery:function(o,n){if(1&o&&e.Gf(Y,5),2&o){let s;e.iGM(s=e.CRH())&&(n.changePasswordNgForm=s.first)}},decls:39,vars:15,consts:[[1,"w-full","p-3"],[1,"mt-3","text-3xl","font-extrabold","tracking-tight","leading-tight"],[1,"mt-5","custom-form",3,"formGroup"],["changePasswordNgForm","ngForm"],["appearance","outline",1,"w-full","mb-5"],["id","old_password","matInput","","type","password",3,"formControlName"],["passwordOldField",""],["mat-icon-button","","type","button","matSuffix","",3,"click"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],["id","password","matInput","","type","password",3,"formControlName"],["passwordField",""],["id","confirm_password","matInput","","type","password",3,"formControlName"],["passwordConfirmField",""],[4,"ngIf"],[1,"flex","justify-end"],["mat-flat-button","",1,"w-full","py-6","sm:min-w-30","sm:max-w-30","min-h-11","max-h-11","rounded-md","custom-button",3,"disabled","click"],["class","text-lg",4,"ngIf"],[3,"diameter","mode",4,"ngIf"],[1,"icon-size-5",3,"svgIcon"],[1,"text-lg"],[3,"diameter","mode"]],template:function(o,n){if(1&o){const s=e.EpF();e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"\u1795\u17d2\u179b\u17b6\u179f\u17cb\u1794\u17d2\u178f\u17bc\u179a\u179b\u17c1\u1781\u179f\u1798\u17d2\u1784\u17b6\u178f\u17cb\u179a\u1794\u179f\u17cb\u17a2\u17d2\u1793\u1780"),e.qZA(),e.TgZ(3,"form",2,3)(5,"mat-form-field",4)(6,"mat-label"),e._uU(7,"\u179b\u17c1\u1781\u179f\u1798\u17d2\u1784\u17b6\u178f\u17cb\u1785\u17b6\u179f\u17cb"),e.qZA(),e._UZ(8,"input",5,6),e.TgZ(10,"button",7),e.NdJ("click",function(){e.CHM(s);const m=e.MAs(9);return e.KtG(m.type="password"===m.type?"text":"password")}),e.YNc(11,q,1,1,"mat-icon",8),e.YNc(12,k,1,1,"mat-icon",8),e.qZA(),e.TgZ(13,"mat-error"),e._uU(14," Password is required "),e.qZA()(),e.TgZ(15,"mat-form-field",4)(16,"mat-label"),e._uU(17,"\u179b\u17c1\u1781\u179f\u1798\u17d2\u1784\u17b6\u178f\u17cb\u1790\u17d2\u1798\u17b8"),e.qZA(),e._UZ(18,"input",9,10),e.TgZ(20,"button",7),e.NdJ("click",function(){e.CHM(s);const m=e.MAs(19);return e.KtG(m.type="password"===m.type?"text":"password")}),e.YNc(21,D,1,1,"mat-icon",8),e.YNc(22,S,1,1,"mat-icon",8),e.qZA(),e.TgZ(23,"mat-error"),e._uU(24," Password is required "),e.qZA()(),e.TgZ(25,"mat-form-field",4)(26,"mat-label"),e._uU(27,"\u1794\u1789\u17d2\u1787\u17b6\u1780\u17cb\u179b\u17c1\u1781\u179f\u1798\u17d2\u1784\u17b6\u178f\u17cb\u1790\u17d2\u1798\u17b8"),e.qZA(),e._UZ(28,"input",11,12),e.TgZ(30,"button",7),e.NdJ("click",function(){e.CHM(s);const m=e.MAs(29);return e.KtG(m.type="password"===m.type?"text":"password")}),e.YNc(31,G,1,1,"mat-icon",8),e.YNc(32,E,1,1,"mat-icon",8),e.qZA(),e.YNc(33,j,2,0,"mat-error",13),e.YNc(34,L,2,0,"mat-error",13),e.qZA(),e.TgZ(35,"div",14)(36,"button",15),e.NdJ("click",function(){return n.changePassword()}),e.YNc(37,z,2,0,"span",16),e.YNc(38,H,1,2,"mat-progress-spinner",17),e.qZA()()()()}if(2&o){const s=e.MAs(9),u=e.MAs(19),m=e.MAs(29);e.xp6(3),e.Q6J("formGroup",n.changePasswordForm),e.xp6(5),e.Q6J("formControlName","old_password"),e.xp6(3),e.Q6J("ngIf","password"===s.type),e.xp6(1),e.Q6J("ngIf","text"===s.type),e.xp6(6),e.Q6J("formControlName","password"),e.xp6(3),e.Q6J("ngIf","password"===u.type),e.xp6(1),e.Q6J("ngIf","text"===u.type),e.xp6(6),e.Q6J("formControlName","confirm_password"),e.xp6(3),e.Q6J("ngIf","password"===m.type),e.xp6(1),e.Q6J("ngIf","text"===m.type),e.xp6(1),e.Q6J("ngIf",n.changePasswordForm.get("confirm_password").hasError("required")),e.xp6(1),e.Q6J("ngIf",n.changePasswordForm.get("confirm_password").hasError("mustMatch")),e.xp6(2),e.Q6J("disabled",n.changePasswordForm.invalid||n.saving),e.xp6(1),e.Q6J("ngIf",!n.changePasswordForm.disabled),e.xp6(1),e.Q6J("ngIf",n.changePasswordForm.disabled)}},dependencies:[C.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,_.lW,l.TO,l.KE,l.hX,l.R9,U.Hw,w.Nt,y.Ou]}),t})();const K=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-my-profile"]],decls:9,vars:0,consts:[[1,"container-my-profiles-section","relative"],[1,"container-my-profiles-header"],[1,"container-my-profiles-body","absolute","inset-0","p-6"],[1,"container-my-profiles-content","border","rounded-lg","bg-white"],["label","\u1796\u17d0\u178f\u17cc\u1798\u17b6\u1793\u1791\u17bc\u1791\u17c5"],["label","\u1795\u17d2\u179b\u17b6\u179f\u17cb\u1794\u17d2\u178f\u17bc\u179a\u1796\u17b6\u1780\u17d2\u1799\u179f\u1798\u17d2\u1784\u17b6\u178f\u17cb"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0),e._UZ(1,"div",1),e.TgZ(2,"div",2)(3,"div",3)(4,"mat-tab-group")(5,"mat-tab",4),e._UZ(6,"app-overview"),e.qZA(),e.TgZ(7,"mat-tab",5),e._UZ(8,"app-change-password"),e.qZA()()()()())},dependencies:[f.SP,f.uX,O,X],styles:[".container-my-profiles-section[_ngcontent-%COMP%]{width:100%;height:calc(100dvh - 3.75rem);overflow:hidden}.container-my-profiles-section[_ngcontent-%COMP%]   .container-my-profiles-header[_ngcontent-%COMP%]{width:100%;background-color:#1470ad;min-height:12rem;max-height:12rem}.container-my-profiles-section[_ngcontent-%COMP%]   .container-my-profiles-body[_ngcontent-%COMP%]{width:100%;height:calc(100dvh - 3.75rem);overflow:hidden}.container-my-profiles-section[_ngcontent-%COMP%]   .container-my-profiles-body[_ngcontent-%COMP%]   .container-my-profiles-content[_ngcontent-%COMP%]{width:100%;max-height:calc(100dvh - 5.75rem);overflow:hidden}  .container-my-profiles-content .mat-tab-group .mat-tab-header .mat-tab-label-container .mat-tab-list .mat-tab-labels .mat-tab-label{width:50%}"]}),t})()}];let $=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[P.m,Z.Y,d.Bz.forChild(K)]}),t})()}}]);